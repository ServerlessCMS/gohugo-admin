webpackJsonp([10],{310:function(t,s,e){e(385);var a=e(0)(e(356),e(401),"data-v-627175ff",null);t.exports=a.exports},346:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(3);s.default={data:function(){return{parallelData:{},password:"",tmpUsername:""}},props:{},computed:{username:function(){return this.parallelData.user?this.parallelData.user.name||this.parallelData.user.login:null}},mounted:function(){var t=window.localStorage.getItem("github");console.log(t),null!==t?(console.log("arse aa"),console.log(t),this.parallelData=JSON.parse(t)):this.$github.get("user",{},this.updateGituser,this.gitError)},methods:{updateGituser:function(t){console.log("updagint paal data"),console.log(t);var s={user:this.tmpUsername,pass:this.password};a.default.set(this.parallelData,"user",t),a.default.set(this.parallelData,"logininfo",s),console.log("window set local storage of"),console.log(this.parallelData),window.localStorage.setItem("github",JSON.stringify(this.parallelData)),this.$store.commit("setGithub",this.parallelData)},isLogIn:function(){return console.log("aaa"),console.log(this.username),null!==this.username&&void 0!==this.username},validateGithubLogin:function(){console.log("validate githbu user"),console.log(this.tmpUsername),console.log(this.password),this.$github.setUserPass(this.tmpUsername,this.password),this.$github.get("user",{},this.updateGituser,this.gitError)},isGithubValid:function(){return console.log("difjkslfjl a : "+(void 0===this.tmpUsername)+" vs "+this.tmpUsername),void 0===this.tmpUsername||""===this.tmpUsername||void 0===this.password||""===this.password?(console.log("AA"),!1):(console.log("BBB"),!0)},logoutGithub:function(){window.localStorage.removeItem("github"),a.default.set(this.parallelData,"user",{}),this.$store.commit("clearGithub")},gitError:function(t){console.log("error"),t.toString().indexOf("code 401")}},watch:{}}},356:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(391),i=e.n(a),o=e(2),n=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t};s.default={components:{GitHub:i.a},data:function(){return{csrf:"",type:"Token",ID:"",pubKey:"",Password:"",healthData:{},sshValid:!0,sshKeyCreateError:!1,healthLoading:!1}},mounted:function(){this.testFetch()},computed:n({},e.i(o.mapGetters)({session:"session",repoState:"repoState"}),{healthKeys:function(){return Object.keys(this.healthData)},renewable:function(){return this.session&&this.session.renewable},session:function(){return this.$store.getters.session},logininfo:function(){return null!==this.$store.state.github.logininfo&&null!==this.$store.state.github.logininfo?this.$store.state.github.logininfo:null},username:function(){return null!==this.$store.state.github&&null!==this.$store.state.github.user?(setTimeout(function(){this.testFetch()},100),this.$store.state.github.user.name||this.$store.state.github.user.login):null},sessionKeys:function(){return null===this.session||Object.keys(this.session)}}),methods:n({},e.i(o.mapActions)(["toggleRepoState"]),{isSshValid:function(){return!0===this.sshValid},fetchCSRF:function(){var t=this;this.$http.get("/api/login/csrf").then(function(s){t.csrf=s.headers["x-csrf-token"]}).catch(function(s){t.$onError(s)})},isGitHub:function(){return!0},getHealth:function(){var t=this;this.healthLoading=!0,this.$http.get("/api/health").then(function(s){t.healthData=JSON.parse(s.data.result),t.healthData.server_time_utc=new Date(1e3*t.healthData.server_time_utc).toUTCString(),t.healthLoading=!1}).catch(function(s){t.$onError(s),t.healthLoading=!1})},login:function(){var t=this;this.$http.post("/api/login",{Type:this.type.toLowerCase(),ID:this.ID,Password:this.Password},{headers:{"X-CSRF-Token":this.csrf}}).then(function(s){t.$notify({title:"Login success!",message:"",type:"success"}),t.clearFormData(),t.session={type:t.type,display_name:s.data.data.display_name,meta:s.data.data.meta,policies:s.data.data.policies,renewable:s.data.data.renewable,token_expiry:0===s.data.data.ttl?"never":new Date(Date.now()+1e3*s.data.data.ttl).toString(),cookie_expiry:new Date(Date.now()+288e5).toString()},window.localStorage.setItem("session",JSON.stringify(t.session)),t.$store.commit("setSession",t.session),"Userpass"!==t.type&&"LDAP"!==t.type||t.$message({message:"Your access token is: "+s.data.data.id+" and this is the only time you will see it. If you wish, you may login with this to avoid creating unnecessary access tokens in the future.",type:"warning",duration:0,showCloseButton:!0})}).catch(function(s){t.$onError(s)})},deleteSSHKeys:function(){},testFetch:function(){var t=this,s=this;this.$http.get(window.apiUrl+"/sshkeys?action=test").then(function(t){t.data.Data.indexOf("SSH Is Valid")>=0?(console.log("ssh valid set to true"),s.sshValid=!0,s.toggleRepoState(0)):s.sshValid=!1}).catch(function(e){console.log("set ssh valid to false??"),console.log(e),s.sshValid=!1,500===e.response.status?s.toggleRepoState(6):t.$onError(e)})},createSSHKey:function(){console.log("creat ssh key"),this.sshKeyCreateError=!1;var t=this;this.$github.setUserPass(this.logininfo.user,this.logininfo.pass),this.$github.get("user",{},function(s){var e=this;console.log("success fully got user informations..."),t.$http.get(window.apiUrl+"/sshkeys?action=create").then(function(s){if(console.log("doing SSH KEY CREATE done"),void 0!==s.data&&null!==s.data&&(t.pubKey=s.data.Data,void 0!==t.pubKey&&null!==t.pubKey)){var a={key:t.pubKey};console.log("will create github key"),console.log(a),t.$github.post("/user/keys",a,function(s){console.log("received git response for ssh key creation"),console.log(s),201===s.status&&t.testFetch()},function(t){console.log("recieved github error?"),console.log(t)})}e.sshKeyCreateError=!0}).catch(function(t){500===t.response.status?e.sshKeyCreateError=!0:e.$onError(t)})},this.gitError)},logout:function(){document.cookie="auth=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.localStorage.removeItem("session"),this.$store.commit("clearSession")},clearFormData:function(){this.ID="",this.Password=""},renewLogin:function(){var t=this;this.$http.post("/api/login/renew-self",{},{headers:{"X-CSRF-Token":this.csrf}}).then(function(s){t.$notify({title:"Renew success!",message:"",type:"success"}),t.session.meta=s.data.data.meta,t.session.policies=s.data.data.policies,t.session.token_expiry=0===s.data.data.ttl?"never":new Date(Date.now()+1e3*s.data.data.ttl).toString(),window.localStorage.setItem("session",JSON.stringify(t.session)),t.$store.commit("setSession",t.session)}).catch(function(s){t.$onError(s)})}})}},367:function(t,s,e){s=t.exports=e(295)(),s.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"GitHub.vue",sourceRoot:""}])},370:function(t,s,e){s=t.exports=e(295)(),s.push([t.i,".button[data-v-627175ff]{margin:5px 0 0}.button .leftfloat[data-v-627175ff]{margin-right:80px!important;float:left}.control .button[data-v-627175ff]{margin:inherit}","",{version:3,sources:["/mnt/windows/shared/workspaces/acentera/serverless-ui/client/views/login/index.vue"],names:[],mappings:"AACA,yBACE,cAAgB,CACjB,AACD,oCACE,4BAA4B,AAC5B,UAAY,CACb,AACD,kCACE,cAAgB,CACjB",file:"index.vue",sourcesContent:["\n.button[data-v-627175ff] {\n  margin: 5px 0 0;\n}\n.button .leftfloat[data-v-627175ff] {\n  margin-right:80px!important;\n  float :left;\n}\n.control .button[data-v-627175ff] {\n  margin: inherit;\n}\n"],sourceRoot:""}])},382:function(t,s,e){var a=e(367);"string"==typeof a&&(a=[[t.i,a,""]]);e(296)(a,{});a.locals&&(t.exports=a.locals)},385:function(t,s,e){var a=e(370);"string"==typeof a&&(a=[[t.i,a,""]]);e(296)(a,{});a.locals&&(t.exports=a.locals)},391:function(t,s,e){e(382);var a=e(0)(e(346),e(398),"data-v-43fb11f0",null);t.exports=a.exports},398:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[t.isLogIn()?e("div",[e("p",[e("strong",[t._v("Logged in as ")]),t._v(" "+t._s(t.username)+" "),e("em",[t._v("(hey there, have fun!)")])]),t._v(" "),e("br"),e("br"),t._v(" "),e("p",{staticClass:"control"},[e("a",{staticClass:"button rightfloat is-primary",on:{click:function(s){t.logoutGithub()}}},[e("span",[t._v("Logout")])])])]):t._e(),t._v(" "),t.isLogIn()?t._e():e("div",[t._m(0),e("article",{staticClass:"tile is-child box"},[e("label",{staticClass:"label"},[t._v("User")]),t._v(" "),e("div",{staticClass:"field has-addons"},[e("p",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tmpUsername,expression:"tmpUsername"}],staticClass:"input",attrs:{type:"text",placeholder:"Github user"},domProps:{value:t.tmpUsername},on:{input:function(s){s.target.composing||(t.tmpUsername=s.target.value)}}})])]),t._v(" "),e("label",{staticClass:"label"},[t._v("Password")]),t._v(" "),e("div",{staticClass:"field has-addons"},[e("p",{staticClass:"control is-expanded"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})])]),t._v(" "),e("p",{staticClass:"control"},[e("a",{staticClass:"button rightfloat is-primary",attrs:{disabled:!t.isGithubValid()},on:{click:function(s){t.validateGithubLogin()}}},[e("span",[t._v("Login with Github")])])])]),t._v(" "),e("p")])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[e("strong",[t._v("Login with GitHub")])])}]}},401:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tile is-ancestor box is-vertical"},[e("div",{staticClass:"tile"},[e("div",{staticClass:"column is-6"},[t.isGitHub()?e("article",{staticClass:"tile is-parent is-5 is-vertical"},[e("article",{staticClass:"tile is-child is-marginless is-paddingless"},[e("GitHub")],1)]):t._e()]),t._v(" "),e("div",{staticClass:"column is-6"},[null===t.username?e("div",{staticClass:"field"},[t._m(0)]):t._e(),t._v(" "),null!==t.username?e("div",[e("article",{staticClass:"tile is-child box"},[e("strong",[t._v("SSHKeys")]),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("article",{staticClass:"tile is-child"},[t.isSshValid()?t._e():e("p",{staticClass:"control"},[e("a",{staticClass:"button rightfloat is-primary",on:{click:function(s){t.createSSHKey()}}},[e("span",[t._v("Create SSH Key")])])]),t._v(" "),t.isSshValid()?e("div",[e("span",[t._v("Your SSH Key is valid")]),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("p",{staticClass:"control"},[e("a",{staticClass:"button leftfloat is-primary",attrs:{title:"Test your ssh key"},on:{click:function(s){t.testFetch()}}},[e("span",[t._v("Test SSH Key")])]),t._v(" "),e("a",{staticClass:"button rightfloat is-primary",attrs:{title:"Not yet implemented",disabled:""},on:{click:function(s){t.deleteSSHKeys()}}},[e("span",[t._v("Delete SSH Key")])])])]):t._e()])])]):t._e()])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("article",{staticClass:"message is-warning"},[e("div",{staticClass:"message-body"},[e("strong",[t._v("You must be logged in to enable SSH Keys")])])])}]}}});
//# sourceMappingURL=10.js.map