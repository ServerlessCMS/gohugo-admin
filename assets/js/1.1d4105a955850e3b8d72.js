webpackJsonp([1,3,4],{297:function(t,e,a){var s=a(0)(a(332),a(338),null,null);t.exports=s.exports},298:function(t,e,a){var s=a(0)(a(333),a(337),null,null);t.exports=s.exports},303:function(t,e,a){a(372);var s=a(0)(a(344),a(387),"data-v-256a5c7b",null);t.exports=s.exports},313:function(t,e,a){"use strict";e.a={props:{card:Boolean,visible:Boolean,closable:Boolean,transition:{type:String,default:"fade"}},data:function(){return{show:this.visible}},mounted:function(){document.body.appendChild(this.$el)},methods:{beforeEnter:function(){this.$emit("open")},afterLeave:function(){this.$emit("close")},active:function(){this.show=!0},deactive:function(){this.show=!1}},computed:{enterClass:function(){return this.transition+"In"},leaveClass:function(){return this.transition+"Out"}},watch:{visible:function(t){this.show=t}}}},317:function(t,e,a){"use strict";var s=a(323),n=a.n(s),i=(a(313),a(321)),o=(a.n(i),a(322));a.n(o);a.d(e,"a",function(){return n.a})},318:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(313);e.default={mixins:[s.a],props:{title:{type:String},okText:{type:String,default:"Ok"},cancelText:{type:String,default:"Cancel"}},computed:{classes:function(){return["modal","animated","is-active"]}},methods:{ok:function(){this.$emit("ok")},cancel:function(){this.$emit("cancel")}}}},319:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(313);e.default={mixins:[s.a],props:{closable:{type:Boolean,default:!0}},computed:{classes:function(){return["modal","animated","is-active"]}}}},320:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(313);e.default={mixins:[s.a],props:{closable:{type:Boolean,default:!0}},computed:{classes:function(){return["modal","animated","is-active"]}}}},321:function(t,e,a){var s=a(0)(a(318),a(325),null,null);t.exports=s.exports},322:function(t,e,a){var s=a(0)(a(319),a(324),null,null);t.exports=s.exports},323:function(t,e,a){var s=a(0)(a(320),a(326),null,null);t.exports=s.exports},324:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transition,mode:"in-out",appear:"","appear-active-class":t.enterClass,"enter-active-class":t.enterClass,"leave-active-class":t.leaveClass},on:{beforeEnter:t.beforeEnter,afterLeave:t.afterLeave}},[t.show?a("div",{class:t.classes},[a("div",{staticClass:"modal-background",on:{click:t.deactive}}),t._v(" "),a("div",{staticClass:"modal-content"},[t._t("default")],2),t._v(" "),t.closable?a("button",{staticClass:"modal-close",on:{click:t.deactive}}):t._e()]):t._e()])},staticRenderFns:[]}},325:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transition,mode:"in-out",appear:"","appear-active-class":t.enterClass,"enter-active-class":t.enterClass,"leave-active-class":t.leaveClass},on:{beforeEnter:t.beforeEnter,afterLeave:t.afterLeave}},[t.show?a("div",{class:t.classes},[a("div",{staticClass:"modal-background",on:{click:t.deactive}}),t._v(" "),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))]),t._v(" "),a("button",{staticClass:"delete",on:{click:t.deactive}})]),t._v(" "),a("section",{staticClass:"modal-card-body"},[t._t("default")],2),t._v(" "),a("footer",{staticClass:"modal-card-foot"},[a("a",{staticClass:"button is-primary",on:{click:t.ok}},[t._v(t._s(t.okText))]),t._v(" "),a("a",{staticClass:"button",on:{click:t.cancel}},[t._v(t._s(t.cancelText))])])])]):t._e()])},staticRenderFns:[]}},326:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:t.transition,mode:"in-out",appear:"","appear-active-class":t.enterClass,"enter-active-class":t.enterClass,"leave-active-class":t.leaveClass},on:{beforeEnter:t.beforeEnter,afterLeave:t.afterLeave}},[t.show?a("div",{class:t.classes},[a("div",{staticClass:"modal-background",on:{click:t.deactive}}),t._v(" "),a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-content"},[t._t("default")],2)]),t._v(" "),t.closable?a("button",{staticClass:"modal-close",on:{click:t.deactive}}):t._e()]):t._e()])},staticRenderFns:[]}},332:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(317);e.default={components:{Modal:s.a},props:{visible:Boolean,title:String,info:String},methods:{close:function(){this.$emit("close")},confirmed:function(){this.$emit("confirmed")}}}},333:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(317);e.default={components:{Modal:s.a},props:{visible:Boolean,title:String,info:String},methods:{close:function(){this.$emit("close")}}}},337:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{visible:t.visible},on:{close:t.close}},[a("div",{staticClass:"box"},[a("article",{staticClass:"media"},[a("div",{staticClass:"media-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v(t._s(t.title))]),t._v(" "),a("br"),t._v(t._s(t.info)+"\n          ")])])])])])])},staticRenderFns:[]}},338:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("modal",{attrs:{visible:t.visible},on:{close:t.close}},[a("div",{staticClass:"box"},[a("article",{staticClass:"media"},[a("div",{staticClass:"media-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v(t._s(t.title))]),t._v(" "),a("br"),t._v(" "),a("a",{staticClass:"button is-danger",on:{click:t.confirmed}},[a("span",[t._v("Delete")]),t._v(" "),a("span",{staticClass:"icon"},[a("i",{staticClass:"fa fa-times"})])])])])])])])])},staticRenderFns:[]}},344:function(t,e,a){"use strict";function s(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(298),i=a.n(n),o=a(297),l=a.n(o),c=["token","userpass","approle"],r=[["accessor","display_name","num_uses","orphan","policies","ttl"],["Name","TTL","Max_TTL","Policies"],["Roleid","Policies","Token_TTL","Token_max_TTL","Secret_id_TTL","Secret_id_num_uses"]];e.default={components:{Modal:i.a,ConfirmModal:l.a},data:function(){return{csrf:"",tabName:"token",tableData:[],tableColumns:["accessor","display_name","num_uses","orphan","policies","ttl"],showModal:!1,showDeleteModal:!1,selectedIndex:-1,currentPage:1,lastPage:1,tokenCount:0,loading:!1,search:{show:!1,str:"",found:0,searched:0,regex:!1,regexp:null}}},mounted:function(){var t=this;this.switchTab(0),this.$http.get("/api/users/csrf").then(function(e){t.csrf=e.headers["x-csrf-token"]}).catch(function(e){t.$onError(e)}),this.$http.get("/api/tokencount").then(function(e){t.tokenCount=e.data.result,t.lastPage=Math.ceil(e.data.result/300)}).catch(function(e){t.$onError(e)})},computed:{selectedItemTitle:function(){return-1!==this.selectedIndex?String(this.tableData[this.selectedIndex][this.tableColumns[0]]):""},selectedItemInfo:function(){return-1!==this.selectedIndex?"This modal panel is under construction":""},confirmDeletionTitle:function(){return"Are you sure you want to delete this?"},nearbyPages:function(){return this.lastPage<6?[].concat(s(Array(this.lastPage).keys())).slice(2):1===this.currentPage||2===this.currentPage?[2,3]:this.currentPage+3>this.lastPage?[this.lastPage-3,this.lastPage-2,this.lastPage-1]:[this.currentPage-1,this.currentPage,this.currentPage+1]},searchRegex:function(){return this.search.regex}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{switchTab:function(t){var e=this;this.tableData=[],this.tabName=c[t],this.tableColumns=r[t],this.search={show:!1,str:"",found:0,searched:0,regex:!1,regexp:null},this.$http.get("/api/users?type="+this.tabName).then(function(t){e.tableData=t.data.result,e.csrf=t.headers["x-csrf-token"]}).catch(function(t){e.$onError(t)})},openModalBasic:function(t){this.selectedIndex=t,this.showModal=!0},closeModalBasic:function(){this.selectedIndex=-1,this.showModal=!1},openDeleteModal:function(t){this.selectedIndex=t,this.showDeleteModal=!0},closeDeleteModal:function(){this.selectedIndex=-1,this.showDeleteModal=!1},deleteItem:function(t){var e=this;this.$http.post("/api/users/revoke",{Type:this.tabName.toLowerCase(),ID:this.tableData[t][this.tableColumns[0]]},{headers:{"X-CSRF-Token":this.csrf}}).then(function(a){e.closeDeleteModal(),e.tableData.splice(t,1),e.$notify({title:"Success",message:"Deletion successful",type:"success"})}).catch(function(t){e.closeDeleteModal(),e.$onError(t)})},loadPage:function(t){var e=this;t<1||t>this.lastPage||this.search.searched||(this.currentPage=t,this.loading=!0,this.$http.get("/api/users?type=token&offset="+(300*(this.currentPage-1)).toString()).then(function(t){e.tableData=t.data.result,e.csrf=t.headers["x-csrf-token"],e.loading=!1}).catch(function(t){e.$onError(t),e.loading=!1}))},itemContainsSearchString:function(t){if(t)for(var e=0;e<this.tableColumns.length;e++)if(t[this.tableColumns[e]].toString().includes(this.search.str))return!0;return!1},itemContainsRegexExpr:function(t){if(t)for(var e=0;e<this.tableColumns.length;e++)if(this.search.regexp.test(t[this.tableColumns[e].toString()]))return!0;return!1},searchByString:function(){var t=this;if(""!==this.search.str){this.tableData=[],this.search.found=0,this.search.searched=0,this.loading=this.lastPage,this.search.regexp=new RegExp(this.search.str);for(var e=0;e<this.lastPage;e++)this.$http.get("/api/users?type=token&offset="+(300*e).toString()).then(function(e){var a=!1;a=t.search.regex?e.data.result.filter(t.itemContainsRegexExpr):e.data.result.filter(t.itemContainsSearchString),t.search.found+=a.length,t.search.searched+=e.data.result.length,t.tableData=t.tableData.concat(a),t.loading=t.loading-1||!1}).catch(function(e){t.$onError(e),t.loading=t.loading-1||!1})}},resetSearch:function(){this.search.str="",this.search.found=0,this.search.searched=0,this.loadPage(this.currentPage)}}}},358:function(t,e,a){e=t.exports=a(295)(),e.push([t.i,".button[data-v-256a5c7b]{margin:5px 0 0}.control .button[data-v-256a5c7b]{margin:inherit}.fa-trash-o[data-v-256a5c7b]{color:red}.fa-info[data-v-256a5c7b]{color:#87cefa}","",{version:3,sources:["/mnt/windows/shared/workspaces/acentera/serverless-ui/client/views/admin/Users.vue"],names:[],mappings:"AACA,yBACE,cAAgB,CACjB,AACD,kCACE,cAAgB,CACjB,AACD,6BACE,SAAW,CACZ,AACD,0BACE,aAAoB,CACrB",file:"Users.vue",sourcesContent:["\n.button[data-v-256a5c7b] {\n  margin: 5px 0 0;\n}\n.control .button[data-v-256a5c7b] {\n  margin: inherit;\n}\n.fa-trash-o[data-v-256a5c7b] {\n  color: red;\n}\n.fa-info[data-v-256a5c7b] {\n  color: lightskyblue;\n}\n"],sourceRoot:""}])},372:function(t,e,a){var s=a(358);"string"==typeof s&&(s=[[t.i,s,""]]);a(296)(s,{});s.locals&&(t.exports=s.locals)},387:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tile is-ancestor"},[a("div",{staticClass:"tile is-parent is-vertical"},[a("article",{staticClass:"tile is-child box"},[a("div",{staticClass:"tabs is-medium is-boxed is-fullwidth"},[a("ul",[a("li",{class:"token"===t.tabName?"is-active":"",on:{click:function(e){t.switchTab(0)}}},[a("a",[t._v("Tokens")])]),t._v(" "),a("li",{class:"userpass"===t.tabName?"is-active":"",on:{click:function(e){t.switchTab(1)}}},[a("a",[t._v("Userpass")])]),t._v(" "),a("li",{class:"approle"===t.tabName?"is-active":"",on:{click:function(e){t.switchTab(2)}}},[a("a",[t._v("Approle")])]),t._v(" "),t._m(0)])]),t._v(" "),"token"===t.tabName?a("div",{staticClass:"tile is-parent table-responsive is-vertical"},[a("nav",{staticClass:"pagination is-right"},[a("a",{staticClass:"pagination-previous",attrs:{disabled:t.loading},on:{click:function(e){t.search.show=!t.search.show}}},[t._v("Search")]),t._v(" "),a("a",{staticClass:"pagination-previous",attrs:{disabled:t.loading||t.currentPage<2||!!t.search.searched},on:{click:function(e){t.loadPage(t.currentPage-1)}}},[t._v("Previous")]),t._v(" "),a("a",{staticClass:"pagination-next",attrs:{disabled:t.loading||t.currentPage>t.lastPage-1||!!t.search.searched},on:{click:function(e){t.loadPage(t.currentPage+1)}}},[t._v("Next page")]),t._v(" "),a("ul",{staticClass:"pagination-list"},[a("li",[a("a",{staticClass:"pagination-link",class:1===t.currentPage?"is-current":"",attrs:{disabled:!!t.search.searched},on:{click:function(e){t.loadPage(1)}}},[t._v("1")])]),t._v(" "),t.currentPage>3&&t.lastPage>5?a("li",[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),t._l(t.nearbyPages,function(e){return a("li",[a("a",{staticClass:"pagination-link",class:e===t.currentPage?"is-current":"",attrs:{disabled:!!t.search.searched},on:{click:function(a){t.loadPage(e)}}},[t._v(t._s(e))])])}),t._v(" "),t.lastPage-t.currentPage>2&&t.lastPage>5&&1!==t.lastPage?a("li",[a("span",{staticClass:"pagination-ellipsis"},[t._v("…")])]):t._e(),t._v(" "),1!==t.lastPage?a("li",[a("a",{staticClass:"pagination-link",class:t.currentPage===t.lastPage?"is-current":"",attrs:{disabled:!!t.search.searched},on:{click:function(e){t.loadPage(t.lastPage)}}},[t._v(t._s(t.lastPage))])]):t._e()],2)]),t._v(" "),a("label",{staticClass:"label"}),t._v(" "),t.search.show?a("article",{staticClass:"tile is-child box"},[a("nav",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-danger",class:t.loading?"is-loading":"",attrs:{disabled:0===t.search.searched},on:{click:function(e){t.resetSearch()}}},[t._v("\n                      Reset\n                    ")])])])]),t._v(" "),a("div",{staticClass:"level-item"},[0!==t.search.searched?a("p",{staticClass:"subtitle is-5"},[t._v("\n                  Found "),a("strong",[t._v(t._s(t.search.found))]),t._v(" matches out of "),a("strong",[t._v(t._s(t.search.searched))]),t._v(" tokens\n                ")]):a("p",{staticClass:"subtitle is-5"},[t._v("\n                  Displaying "),a("strong",[t._v(t._s(Math.min(t.tokenCount,300)))]),t._v(" out of "),a("strong",[t._v(t._s(t.tokenCount))]),t._v(" tokens\n                ")])]),t._v(" "),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control has-icons-right"},[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.regex,expression:"search.regex"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.search.regex=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:!1}},[t._v("Substring")]),t._v(" "),a("option",{domProps:{value:!0}},[t._v("Regex")])])])]),t._v(" "),a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.str,expression:"search.str"}],staticClass:"input",attrs:{type:"text",placeholder:"Search all tokens"},domProps:{value:t.search.str},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.searchByString()},input:function(e){e.target.composing||(t.search.str=e.target.value)}}})]),t._v(" "),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-info",class:t.loading?"is-loading":"",attrs:{disabled:""===t.search.str},on:{click:function(e){t.searchByString()}}},[t._v("\n                        Search\n                      ")])])])])])])]):t._e(),t._v(" "),a("label",{staticClass:"label"}),t._v(" "),a("table",{staticClass:"table is-striped is-narrow"},[a("thead",[a("tr",[a("th"),t._v(" "),t._l(t.tableColumns,function(e){return a("th",[t._v("\n                  "+t._s(t._f("capitalize")(e))+"\n                ")])}),t._v(" "),a("th")],2)]),t._v(" "),a("tbody",t._l(t.tableData,function(e,s){return a("tr",[a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openModalBasic(s)}}},[a("i",{staticClass:"fa fa-info"})])])]),t._v(" "),t._l(t.tableColumns,function(s){return e?a("td",[t._v("\n                  "+t._s(e[s])+"\n                ")]):a("td",[t._v("\n                  ERROR: An invalid token-accessor has been found\n                ")])}),t._v(" "),a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openDeleteModal(s)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])],2)}))])]):t._e(),t._v(" "),"userpass"===t.tabName?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table is-striped is-narrow"},[a("thead",[a("tr",[a("th"),t._v(" "),t._l(t.tableColumns,function(e){return a("th",[t._v("\n                  "+t._s(e)+"\n                ")])}),t._v(" "),a("th")],2)]),t._v(" "),a("tbody",t._l(t.tableData,function(e,s){return a("tr",[a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openModalBasic(s)}}},[a("i",{staticClass:"fa fa-info"})])])]),t._v(" "),t._l(t.tableColumns,function(s){return a("td",[t._v("\n                  "+t._s(e[s])+"\n                ")])}),t._v(" "),a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openDeleteModal(s)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])],2)}))])]):t._e(),t._v(" "),"approle"===t.tabName?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table is-striped is-narrow"},[a("thead",[a("tr",[a("th"),t._v(" "),t._l(t.tableColumns,function(e){return a("th",[t._v("\n                  "+t._s(e)+"\n                ")])}),t._v(" "),a("th")],2)]),t._v(" "),a("tbody",t._l(t.tableData,function(e,s){return a("tr",[a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openModalBasic(s)}}},[a("i",{staticClass:"fa fa-info"})])])]),t._v(" "),t._l(t.tableColumns,function(s){return a("td",[t._v("\n                  "+t._s(e[s])+"\n                ")])}),t._v(" "),a("td",{attrs:{width:"34"}},[a("span",{staticClass:"icon"},[a("a",{on:{click:function(e){t.openDeleteModal(s)}}},[a("i",{staticClass:"fa fa-trash-o"})])])])],2)}))])]):t._e()])])]),t._v(" "),a("modal",{attrs:{visible:t.showModal,title:t.selectedItemTitle,info:t.selectedItemInfo},on:{close:t.closeModalBasic}}),t._v(" "),a("confirmModal",{attrs:{visible:t.showDeleteModal,title:t.confirmDeletionTitle,info:t.selectedItemInfo},on:{close:t.closeDeleteModal,confirmed:function(e){t.deleteItem(t.selectedIndex)}}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{attrs:{disabled:""}},[a("a",[t._v("Certificates")])])}]}}});
//# sourceMappingURL=1.1d4105a955850e3b8d72.js.map